(this["webpackJsonpshape-editor"]=this["webpackJsonpshape-editor"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports={wrap:"Header_wrap__3D2ds",image:"Header_image__15xHu",imageUndo:"Header_imageUndo__1HnuQ",imageRedo:"Header_imageRedo__2hSh7",withOpacity:"Header_withOpacity__1NG3b",imageHoverUndo:"Header_imageHoverUndo__1zzpq",imageHoverRedo:"Header_imageHoverRedo__2YPc1"}},,function(e,t,n){e.exports={wrap:"Element_wrap__1rprF",image:"Element_image__2D8Ax",text:"Element_text__2tchm"}},,,function(e,t,n){e.exports={button:"Button_button__3GztG",text:"Button_text__3ZMjl"}},,,function(e,t,n){e.exports={canvasWrap:"View_canvasWrap__3l6n3"}},function(e,t,n){e.exports={circle:"Circle_circle__r1puc"}},function(e,t,n){e.exports={wrap:"Popup_wrap__3kESB"}},,,,,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),o=n(13),r=n.n(o),c=(n(25),n(14)),s=n.n(c),u=n(7),h={canvasWidth:640,canvasHeight:480,fillColor:"gray",outlineColor:"#000"},l=n(0);var d=function(e){var t=e.frame,n=t.leftTopPoint.x,i=t.leftTopPoint.y,a=t.width,o=t.height;return Object(l.jsx)("polygon",{x:n,y:i,points:"".concat(n," ").concat(i+o,",  \n\t\t\t\t ").concat(n+a/2," ").concat(i,", \n\t\t\t\t ").concat(n+a," ").concat(i+o," "),fill:h.fillColor,stroke:h.outlineColor})};var f=function(e){var t=e.frame,n=t.leftTopPoint.x,i=t.leftTopPoint.y,a=t.width,o=t.height;return Object(l.jsx)("rect",{x:n,y:i,width:a,height:o,fill:h.fillColor,stroke:h.outlineColor})};var v=function(e){var t=e.frame,n=t.leftTopPoint.x,i=t.leftTopPoint.y,a=t.width,o=t.height;return Object(l.jsx)("ellipse",{cx:n+a/2,cy:i+o/2,rx:a/2,ry:o/2,fill:h.fillColor,stroke:h.outlineColor})};var m=function(e){var t=e.path,n=e.frame,i=n.leftTopPoint.x,a=n.leftTopPoint.y,o=n.width,r=n.height;return Object(l.jsx)("image",{preserveAspectRatio:"none",x:i,y:a,width:o,height:r,xlinkHref:t})};var p=function(e){return void 0!==e.GetPath};var j=function(e){var t=e.item,n=e.frame;switch(t.GetType()){case"Triangle":return Object(l.jsx)(d,{frame:n});case"Rectangle":return Object(l.jsx)(f,{frame:n});case"Ellipse":return Object(l.jsx)(v,{frame:n});case"Image":if(p(t))return Object(l.jsx)(m,{path:t.GetPath(),frame:n})}return null};var b=function(e){var t=e.frame;return Object(l.jsx)("rect",{x:t.leftTopPoint.x,y:t.leftTopPoint.y,width:t.width,height:t.height,stroke:"#ff0000",fill:"#000",fillOpacity:"0",strokeWidth:1})};var y=function(e,t,n,a){var o,r,c=!1;Object(i.useEffect)((function(){var t=e.current;return null===t||void 0===t||t.addEventListener("mousedown",s),function(){null===t||void 0===t||t.removeEventListener("mousedown",s)}}));var s=function(e){c=!1,o={x:e.pageX,y:e.pageY},null===t||void 0===t||t(o),document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)},u=function(e){c=!0;var t={x:e.pageX-o.x,y:e.pageY-o.y};null===n||void 0===n||n(t),r=t},h=function e(){c&&(null===a||void 0===a||a(r)),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e)}};var g=function(e,t,n,i,a,o){y(e,a,(function(t){var a,o=null===(a=e.current)||void 0===a?void 0:a.getBoundingClientRect();o&&(t.x=n.x+t.x<0?0:n.x+t.x>h.canvasWidth-o.width?h.canvasWidth-o.width:n.x+t.x,t.y=n.y+t.y<0?0:n.y+t.y>h.canvasHeight-o.height?h.canvasHeight-o.height:n.y+t.y),i(t)}),(function(e){o(t,e)}))};var x=function(e,t){Object(i.useEffect)((function(){return document.addEventListener("click",n,!0),function(){document.removeEventListener("click",n,!0)}}));var n=function(n){e.current&&!e.current.contains(n.target)&&t()}};var O=function(e,t){return a.a.isValidElement(e)?a.a.cloneElement(e,t):e},k=n(15),w=n.n(k);var E=function(e,t,n,i,a){y(e,(function(){}),(function(e){e.x=n.width+e.x<1?1:n.leftTopPoint.x+n.width+e.x>h.canvasWidth?h.canvasWidth-n.leftTopPoint.x:n.width+e.x,e.y=n.height+e.y<1?1:n.leftTopPoint.y+n.height+e.y>h.canvasHeight?h.canvasHeight-n.leftTopPoint.y:n.height+e.y,i({width:e.x,height:e.y})}),(function(e){a(t,{width:e.x,height:e.y})}))};function I(e){var t=e.selectItem,n=e.setSize,a=e.resizeItem,o=e.frame,r=Object(i.useRef)(null);return E(r,t.GetId(),o,n,a),Object(l.jsx)("circle",{className:w.a.circle,ref:r,cx:o.leftTopPoint.x+o.width,cy:o.leftTopPoint.y+o.height,r:4,fill:"#000"})}var C=function(e){var t=e.item,n=e.selectItem,a=e.setSelectItem,o=e.resizeItem,r=e.moveItem,c=e.children,s=Object(i.useRef)(null),h=Object(i.useRef)(null),d=t.GetFrame().leftTopPoint.x,f=t.GetFrame().leftTopPoint.y,v=t.GetFrame().width,m=t.GetFrame().height,p=Object(i.useState)({x:d,y:f}),j=Object(u.a)(p,2),y=j[0],k=j[1],w=Object(i.useState)({width:v,height:m}),E=Object(u.a)(w,2),C=E[0],R=E[1],_=function(){a(t)};return Object(i.useEffect)((function(){var e=s.current;return null===e||void 0===e||e.addEventListener("click",_),function(){null===e||void 0===e||e.removeEventListener("click",_)}})),Object(i.useEffect)((function(){k({x:d,y:f})}),[d,f]),Object(i.useEffect)((function(){R({width:v,height:m})}),[v,m]),x(h,(function(){a(null)})),g(s,t.GetId(),y,k,(function(){a(t)}),r),Object(l.jsxs)("g",{ref:h,children:[Object(l.jsxs)("g",{ref:s,children:[O(c,{frame:{leftTopPoint:y,width:C.width,height:C.height}}),(null===n||void 0===n?void 0:n.GetId())===t.GetId()&&Object(l.jsx)(b,{frame:{leftTopPoint:y,width:C.width,height:C.height}})]}),(null===n||void 0===n?void 0:n.GetId())===t.GetId()&&Object(l.jsx)(I,{selectItem:n,setSize:R,resizeItem:o,frame:{leftTopPoint:y,width:C.width,height:C.height}})]})};var R=function(e){var t=e.items,n=e.resizeItem,a=e.moveItem,o=e.deleteItem,r=Object(i.useState)(null),c=Object(u.a)(r,2),s=c[0],d=c[1],f=function(e){"Delete"===e.key&&s&&(o(s.GetId()),d(null))};return Object(i.useEffect)((function(){return document.addEventListener("keyup",f),function(){document.removeEventListener("keyup",f)}})),Object(l.jsxs)("svg",{baseProfile:"full",width:h.canvasWidth,height:h.canvasHeight,children:[Object(l.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),t.map((function(e){return Object(l.jsx)(C,{item:e,selectItem:s,setSelectItem:d,resizeItem:n,moveItem:a,children:Object(l.jsx)(j,{item:e,frame:e.GetFrame()})},e.GetId())}))]})},_=n(6),T=n.n(_),P=n(11),U=n.n(P),G=n(16),S=n.n(G);var z=function(e){var t=e.visible,n=e.indent,a=e.setColor,o=e.children;return Object(i.useEffect)((function(){return t&&a("#7e8a97"),function(){a("#cbaf87")}}),[t,a]),Object(l.jsx)("div",{className:S.a.wrap,style:{display:t?"block":"none",left:"".concat(n,"px")},children:o.map((function(e){return e}))})};var H=function(e){var t=e.text,n=e.indent,a=e.children,o=function(e){var t=Object(i.useState)(e),n=Object(u.a)(t,2),a=n[0],o=n[1],r=Object(i.useRef)(null),c=function(e){r.current&&!r.current.contains(e.target)&&o(!1)};return Object(i.useEffect)((function(){return document.addEventListener("click",c,!0),function(){document.removeEventListener("click",c,!0)}})),{ref:r,isComponentVisible:a,setIsComponentVisible:o}}(!1),r=o.ref,c=o.isComponentVisible,s=o.setIsComponentVisible,h=Object(i.useState)("#cbaf87"),d=Object(u.a)(h,2),f=d[0],v=d[1];return Object(l.jsxs)("div",{ref:r,className:U.a.button,onClick:function(){s(!c)},onMouseMove:function(){v("#7e8a97")},onMouseLeave:function(){c||v("#cbaf87")},style:{backgroundColor:f},children:[Object(l.jsx)("span",{className:U.a.text,children:t}),Object(l.jsx)(z,{visible:c,indent:n,setColor:v,children:a.map((function(e){return e}))})]})},D=n(8),A=n.n(D);var N=function(e){var t=e.imageUrl,n=e.text,i=e.action;return Object(l.jsxs)("div",{className:A.a.wrap,onClick:function(){i()},children:[Object(l.jsx)("img",{className:A.a.image,src:t,alt:""}),Object(l.jsx)("div",{className:A.a.text,children:n})]})};var L=function(e){var t=e.imageUrl,n=e.text,a=e.action,o=Object(i.useRef)(null);return Object(l.jsxs)("div",{className:A.a.wrap,onClick:function(){o.current&&o.current.click()},children:[Object(l.jsx)("input",{type:"file",hidden:!0,accept:"image/png, image/gif, image/jpeg",ref:o,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){a(n.result)},e.target.value=null}}),Object(l.jsx)("img",{className:A.a.image,src:t,alt:""}),Object(l.jsx)("div",{className:A.a.text,children:n})]})};var M=function(e){var t=e.addTriangle,n=e.addRectangle,a=e.addEllipse,o=e.addImage,r=e.canUndo,c=e.undo,s=e.canRedo,u=e.redo,h=function(e){"R"===e.key.toUpperCase()&&n(),"E"!==e.key.toUpperCase()&&"C"!==e.key.toUpperCase()||a(),"T"===e.key.toUpperCase()&&t()};return Object(i.useEffect)((function(){return document.addEventListener("keyup",h),function(){document.removeEventListener("keyup",h)}})),Object(l.jsxs)("div",{className:T.a.wrap,children:[Object(l.jsxs)(H,{text:"Insert",indent:15,children:[Object(l.jsx)(N,{imageUrl:"images/triangle.png",text:"Triangle",action:t}),Object(l.jsx)(N,{imageUrl:"images/rectangle.png",text:"Rectangle",action:n}),Object(l.jsx)(N,{imageUrl:"images/ellipse.png",text:"Ellipse",action:a}),Object(l.jsx)(L,{imageUrl:"images/image.png",text:"Image",action:o})]}),Object(l.jsxs)("div",{className:T.a.history,children:[Object(l.jsx)("img",{className:r()?T.a.image+" "+T.a.imageUndo+" "+T.a.imageHoverUndo:T.a.image+" "+T.a.imageUndo+" "+T.a.withOpacity,src:"images/undo.png",alt:"",onClick:function(){r()&&c()}}),Object(l.jsx)("img",{className:s()?T.a.image+" "+T.a.imageRedo+" "+T.a.imageHoverRedo:T.a.image+" "+T.a.imageRedo+" "+T.a.withOpacity,src:"images/redo.png",alt:"",onClick:function(){s()&&u()}})]})]})};var F=function(e){var t=e.controller,n=e.items;return Object(l.jsxs)("div",{children:[Object(l.jsx)(M,{addTriangle:function(){t.AddShape("Triangle")},addRectangle:function(){t.AddShape("Rectangle")},addEllipse:function(){t.AddShape("Ellipse")},addImage:function(e){t.AddImage(e)},canUndo:function(){return t.CanUndo()},undo:function(){t.Undo()},canRedo:function(){return t.CanRedo()},redo:function(){t.Redo()}}),Object(l.jsx)("div",{className:s.a.canvasWrap,children:Object(l.jsx)(R,{items:n,deleteItem:function(e){t.DeleteItem(e)},resizeItem:function(e,n){t.ResizeItem(e,n)},moveItem:function(e,n){t.MoveItem(e,n)}})})]})},W=n(2),V=n(3),B=function(){function e(){Object(W.a)(this,e),this.MAX_DEPTH_OF_HISTORY=20,this.undo=[],this.redo=[]}return Object(V.a)(e,[{key:"CanRedo",value:function(){return this.redo.length>0}},{key:"CanUndo",value:function(){return this.undo.length>0}},{key:"Redo",value:function(){if(!this.CanRedo())throw Error("the redo operation cannot be applied");var e=this.redo.pop();void 0!==e&&(this.undo.push(e),e.Execute())}},{key:"Undo",value:function(){if(!this.CanUndo())throw Error("the undo operation cannot be applied");var e=this.undo.pop();void 0!==e&&(this.redo.push(e),e.UnExecute())}},{key:"ExecuteCommand",value:function(e){e.Execute(),this.AddExecutedCommand(e)}},{key:"AddExecutedCommand",value:function(e){this.redo=[],this.undo.length>=this.MAX_DEPTH_OF_HISTORY&&this.undo.shift(),this.undo.push(e)}}]),e}(),Y=n(5),X=n(4),J=function(){function e(){Object(W.a)(this,e),this.executed=!1}return Object(V.a)(e,[{key:"Execute",value:function(){this.DoExecute(),this.executed=!0}},{key:"UnExecute",value:function(){if(this.IsExecuted())return this.DoUnExecute(),void(this.executed=!1);throw Error("undo the command before it is executed")}},{key:"IsExecuted",value:function(){return this.executed}}]),e}(),q=n(28),Q=function(){function e(){Object(W.a)(this,e),this.frame=void 0,this.frame={leftTopPoint:{x:50,y:50},width:200,height:100}}return Object(V.a)(e,[{key:"GetFrame",value:function(){return this.frame}},{key:"Move",value:function(e){this.frame.leftTopPoint=e}},{key:"Resize",value:function(e){this.frame.width=e.width,this.frame.height=e.height}}]),e}(),Z=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(W.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).type="Rectangle",e.id=Object(q.a)(),e}return Object(V.a)(n,[{key:"GetType",value:function(){return this.type}},{key:"GetId",value:function(){return this.id}}]),n}(Q),K=Z,$=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(W.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).type="Triangle",e.id=Object(q.a)(),e}return Object(V.a)(n,[{key:"GetType",value:function(){return this.type}},{key:"GetId",value:function(){return this.id}}]),n}(Q),ee=$,te=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(W.a)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).type="Ellipse",e.id=Object(q.a)(),e}return Object(V.a)(n,[{key:"GetType",value:function(){return this.type}},{key:"GetId",value:function(){return this.id}}]),n}(Q),ne=te,ie=function(){function e(){Object(W.a)(this,e)}return Object(V.a)(e,[{key:"CreateShape",value:function(e){if("Rectangle"===e)return new K;if("Triangle"===e)return new ee;if("Ellipse"===e)return new ne;throw Error("incorrect shape type")}}]),e}(),ae=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(e,i){var a;return Object(W.a)(this,n),(a=t.call(this)).shapes=void 0,a.shape=void 0,a.shapes=e,a.shape=(new ie).CreateShape(i),a}return Object(V.a)(n,[{key:"DoExecute",value:function(){this.shapes.push(this.shape)}},{key:"DoUnExecute",value:function(){this.shapes.pop()}}]),n}(J),oe=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(e,i){var a;return Object(W.a)(this,n),(a=t.call(this)).shapes=void 0,a.position=0,a.shape=null,a.shapes=e,a.position=a.shapes.findIndex((function(e){return e.GetId()===i})),a}return Object(V.a)(n,[{key:"DoExecute",value:function(){if(this.position>-1)return this.shape=this.shapes[this.position],void this.shapes.splice(this.position,1);throw Error("incorrect id specified")}},{key:"DoUnExecute",value:function(){this.shape&&this.shapes.splice(this.position,0,this.shape)}}]),n}(J),re=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(e,i,a){var o;return Object(W.a)(this,n),(o=t.call(this)).shapes=void 0,o.shape=void 0,o.newSize=void 0,o.oldSize={width:0,height:0},o.shapes=e,o.newSize=i,o.shape=o.shapes.find((function(e){return e.GetId()===a})),o}return Object(V.a)(n,[{key:"DoExecute",value:function(){var e;this.oldSize=this.shape?{width:this.shape.GetFrame().width,height:this.shape.GetFrame().height}:this.oldSize,null===(e=this.shape)||void 0===e||e.Resize(this.newSize)}},{key:"DoUnExecute",value:function(){var e;null===(e=this.shape)||void 0===e||e.Resize(this.oldSize)}}]),n}(J),ce=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(e,i,a){var o;return Object(W.a)(this,n),(o=t.call(this)).shapes=void 0,o.shape=void 0,o.newPoint=void 0,o.oldPoint={x:0,y:0},o.shapes=e,o.newPoint=i,o.shape=o.shapes.find((function(e){return e.GetId()===a})),o}return Object(V.a)(n,[{key:"DoExecute",value:function(){var e;this.oldPoint=this.shape?this.shape.GetFrame().leftTopPoint:this.oldPoint,null===(e=this.shape)||void 0===e||e.Move(this.newPoint)}},{key:"DoUnExecute",value:function(){var e;null===(e=this.shape)||void 0===e||e.Move(this.oldPoint)}}]),n}(J),se=function(){function e(t){Object(W.a)(this,e),this.id=void 0,this.frame=void 0,this.type="Image",this.path=void 0,this.path=t,this.id=Object(q.a)(),this.frame={leftTopPoint:{x:50,y:50},width:100,height:100}}return Object(V.a)(e,[{key:"GetType",value:function(){return this.type}},{key:"GetPath",value:function(){return this.path}},{key:"GetId",value:function(){return this.id}},{key:"GetFrame",value:function(){return this.frame}},{key:"Move",value:function(e){this.frame.leftTopPoint=e}},{key:"Resize",value:function(e){this.frame.width=e.width,this.frame.height=e.height}}]),e}(),ue=function(e){Object(Y.a)(n,e);var t=Object(X.a)(n);function n(e,i,a){var o;return Object(W.a)(this,n),(o=t.call(this)).shapes=void 0,o.shape=void 0,o.shapes=e,o.shape=new se(a),o}return Object(V.a)(n,[{key:"DoExecute",value:function(){this.shapes.push(this.shape)}},{key:"DoUnExecute",value:function(){this.shapes.pop()}}]),n}(J),he=function(){function e(){Object(W.a)(this,e),this.items=[],this.history=void 0,this.observers=[],this.history=new B}return Object(V.a)(e,[{key:"GetItems",value:function(){return this.items}},{key:"AddShape",value:function(e){var t=new ae(this.items,e);this.ExecuteCommand(t)}},{key:"AddImage",value:function(e){var t=new ue(this.items,"Image",e);this.ExecuteCommand(t)}},{key:"DeleteItem",value:function(e){var t=new oe(this.items,e);this.ExecuteCommand(t)}},{key:"ResizeItem",value:function(e,t){var n=new re(this.items,t,e);this.ExecuteCommand(n)}},{key:"MoveItem",value:function(e,t){var n=new ce(this.items,t,e);this.ExecuteCommand(n)}},{key:"CanUndo",value:function(){return this.history.CanUndo()}},{key:"Undo",value:function(){this.history.Undo(),this.NotifyObservers()}},{key:"CanRedo",value:function(){return this.history.CanRedo()}},{key:"Redo",value:function(){this.history.Redo(),this.NotifyObservers()}},{key:"RegisterObserver",value:function(e){this.observers.push(e)}},{key:"RemoveObserver",value:function(e){this.observers.filter((function(t){return t!==e}))}},{key:"NotifyObservers",value:function(){this.observers.forEach((function(e){return e()}))}},{key:"ExecuteCommand",value:function(e){this.history.ExecuteCommand(e),this.NotifyObservers()}}]),e}(),le=function(){function e(t){Object(W.a)(this,e),this.model=void 0,this.model=t}return Object(V.a)(e,[{key:"GetItems",value:function(){return this.model.GetItems()}},{key:"AddShape",value:function(e){this.model.AddShape(e)}},{key:"AddImage",value:function(e){this.model.AddImage(e)}},{key:"DeleteItem",value:function(e){this.model.DeleteItem(e)}},{key:"ResizeItem",value:function(e,t){this.model.ResizeItem(e,t)}},{key:"MoveItem",value:function(e,t){this.model.MoveItem(e,t)}},{key:"CanUndo",value:function(){return this.model.CanUndo()}},{key:"Undo",value:function(){this.model.Undo()}},{key:"CanRedo",value:function(){return this.model.CanRedo()}},{key:"Redo",value:function(){this.model.Redo()}}]),e}(),de=r.a.createRoot(document.getElementById("root")),fe=new he,ve=new le(fe);function me(){de.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(F,{items:fe.GetItems(),controller:ve})}))}fe.RegisterObserver(me),me()}],[[27,1,2]]]);
//# sourceMappingURL=main.3483f232.chunk.js.map